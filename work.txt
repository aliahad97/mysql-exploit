Pre-reqs: sudo apt-get install libaio1


https://dev.mysql.com/doc/refman/5.5/en/binary-installation.html

--installed and set up. last command runs the server


https://dev.mysql.com/doc/refman/5.5/en/postinstallation.html

-- do the rest next


https://dev.mysql.com/doc/refman/5.5/en/postinstallation.html

-------------------------------------------------------------

Proper link: https://gist.github.com/ahmadhasankhan/48fc9fc9a19807daef1622751a56884b   <---------------USE THISSS!!!!
-------------------------------------------------------------
-- do the rest next

https://dev.mysql.com/doc/refman/5.5/en/testing-server.html

-- above link will help test the server

https://dev.mysql.com/doc/refman/5.5/en/starting-server.html

-- above link should start the server

--------------------------------------------------------------
Download:
mysql 5.5.49 : https://downloads.mysql.com/archives/get/file/mysql-5.5.49-linux2.6-x86_64.tar.gz
All server versions: https://downloads.mysql.com/archives/community/

Attack:
http://legalhackers.com/advisories/MySQL-Exploit-Remote-Root-Code-Execution-Privesc-CVE-2016-6662.html

run server:
	shell> sudo /etc/init.d/mysql.server start
	shell> sudo bin/mysqld_safe --user=mysql --basedir=/usr/local/mysql --datadir=/var/lib/mysql/mysql/data &

init database:
	shell> sudo scripts/mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/var/lib/mysql/mysql/data

Notes:

mysql_hookandroot_lib.c => malicious library
compile: 
	
	shell> gcc -Wall -fPIC -shared -o mysql_hookandroot_lib.so mysql_hookandroot_lib.c -ldl


0ldSQL_MySQL_RCE_exploit.py => malicious script
run: 
	
	./0ldSQL_MySQL_RCE_exploit.py -dbuser attacker -dbpass 'p0cpass!' -dbhost localhost -dbname pocdb -mycnf /etc/my.cnf

-------------------------------------------------------------------
Miscelenious
-------------------------------------------------------------------

mysql profile:
	dir: /etc/mysql/

mysql existing version: 
	dir: /var/lib/mysql/

mysql config file:
	dir: /etc/my.cnf

link directory to another folder
 sudo ln -s ~/Downloads/mysql-5.5.50-linux2.6-x86_64/bin/mysql /usr/local/bin/mysql

 mysql basedir:
 	dir: /usr/local/
data directory:
	dir: /var/lib/mysql/


--------------------------------------------------------------------------

access mysql:
	shell>mysql -u root -p

Check for permissions:
	mysql> SHOW GRANTS FOR 'attacker'@'%';
CREATE db:
	mysql> CREATE DATABASE pocdb;
CREATE user:
	mysql> GRANT FILE ON *.* TO 'attacker'@'%' IDENTIFIED BY 'p0cpass!';
Create permissions:
	mysql> GRANT SELECT, INSERT, CREATE ON `pocdb`.* TO 'attacker'@'%';
